<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Harmonizing five-year counts • rddharmony</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Harmonizing five-year counts">
<meta property="og:description" content="This wrapper takes five-year counts from the UNDP database and standardizes/harmonizes them.
">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-reverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rddharmony</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Harmonization_Workflow.html">Harmonization Workflow</a>
    </li>
    <li>
      <a href="../articles/DDharmonize_validate_BirthCounts.html">DDharmonize_validate_BirthCounts()</a>
    </li>
    <li>
      <a href="../articles/DDharmonize_validate_DeathCounts.html">DDharmonize_validate_DeathCounts()</a>
    </li>
    <li>
      <a href="../articles/DDharmonize_validate_PopCounts.html">DDharmonize_validate_PopCounts()</a>
    </li>
    <li>
      <a href="../articles/dd_oag_compute.html">Computing data values for the open age group needed to close a series</a>
    </li>
    <li>
      <a href="../articles/DDharmonize_5YearCounts.html">Harmonizing five-year counts</a>
    </li>
    <li>
      <a href="../articles/DDharmonize_1YearCounts.html">Harmonizing one-year counts</a>
    </li>
    <li>
      <a href="../articles/DDharmonize_AbridgedAndComplete.html">Reconciling abridged and complete series</a>
    </li>
    <li>
      <a href="../articles/dd_validate_totals_over_age.html">Validating totals over age</a>
    </li>
    <li>
      <a href="../articles/dd_validate_totals_over_sex.html">Validating totals over sex</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Shelmith-Kariuki/rddharmony/" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
    
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="DDharmonize_5YearCounts_files/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="DDharmonize_5YearCounts_files/kePrint-0.0.1/kePrint.js"></script><link href="DDharmonize_5YearCounts_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Harmonizing five-year counts</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Shelmith-Kariuki/rddharmony/blob/HEAD/vignettes/DDharmonize_5YearCounts.Rmd" class="external-link"><code>vignettes/DDharmonize_5YearCounts.Rmd</code></a></small>
      <div class="hidden name"><code>DDharmonize_5YearCounts.Rmd</code></div>

    </div>

    
    
<p>The purpose of this process is to standardizes/harmonize five-year vital and population counts taken from the UNDP database.</p>
<p>There are two functions involved. <code>DDharmonize_Vitals5</code> <a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> is implemented on births and deaths data while <code>DDharmonize_Pop5</code> is implemented on population data.</p>
<p>The functions are defined as follows:</p>
<blockquote>
<p>DDharmonize_Vitals5(indata, type = c(“births”,“deaths”))</p>
</blockquote>
<blockquote>
<p>DDharmonize_Pop5(indata)</p>
</blockquote>
<p>In this vignette, we will use the <code>vitals5_df</code> dataset that is embedded on this package, and the <code><a href="../reference/DDharmonize_Vitals5.html">DDharmonize_Vitals5()</a></code> function to show how five-year birth counts are harmonized. This dataset represents births by age of mother and sex of child in Norway for the year 2002 and for cases where SexID == “Both sexes”.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## Load the packages required</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Shelmith-Kariuki/rddharmony" class="external-link">rddharmony</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/" class="external-link">kableExtra</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://purrr.tidyverse.org" class="external-link">purrr</a></span><span class="op">)</span>

<span class="co">## Create a function to be used to generate the table output</span>
<span class="va">tab_output</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">tab</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">tab</span>, booktabs <span class="op">=</span> <span class="cn">TRUE</span>, align <span class="op">=</span> <span class="st">"c"</span>, table.envir <span class="op">=</span> <span class="st">"capctable"</span>, longtable <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html" class="external-link">kable_styling</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/row_spec.html" class="external-link">row_spec</a></span><span class="op">(</span><span class="fl">0</span>, bold <span class="op">=</span> <span class="cn">T</span>, color <span class="op">=</span> <span class="st">"white"</span>, background <span class="op">=</span> <span class="st">"#6ebed8"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_classic.html" class="external-link">kable_paper</a></span><span class="op">(</span>html_font <span class="op">=</span> <span class="st">"helvetica"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/scroll_box.html" class="external-link">scroll_box</a></span><span class="op">(</span>width <span class="op">=</span> <span class="st">"100%"</span>, height <span class="op">=</span> <span class="st">"300px"</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>The data, with only a few variables displayed, is shown below.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">new_df</span> <span class="op">&lt;-</span> <span class="va">vitals5_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">LocID</span>, <span class="va">LocName</span>, <span class="va">DataSourceYear</span>, <span class="va">DataStatusName</span>, <span class="va">SexName</span>, <span class="va">SexID</span>, <span class="va">DataSourceYear</span>, <span class="va">TimeLabel</span>, <span class="va">TimeMid</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"Age"</span><span class="op">)</span>, <span class="va">DataValue</span>, <span class="va">SeriesID</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">agesort</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">AgeLabel</span><span class="op">)</span>

<span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">tab_output</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:300px; overflow-x: scroll; width:100%; ">
<table class="table table lightable-paper" style="margin-left: auto; margin-right: auto; font-family: helvetica; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
LocID
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
LocName
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
DataSourceYear
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
DataStatusName
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
SexName
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
SexID
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
TimeLabel
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
TimeMid
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeID
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeUnit
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeStart
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeEnd
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeSpan
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeMid
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeLabel
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeSort
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
DataValue
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
SeriesID
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2005
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
3222
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
7.5
</td>
<td style="text-align:center;">
0-14
</td>
<td style="text-align:center;">
9
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
1.106610e+14
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
30504
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
12
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
14.5
</td>
<td style="text-align:center;">
12-14
</td>
<td style="text-align:center;">
106
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
304
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
20
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
17.5
</td>
<td style="text-align:center;">
15-19
</td>
<td style="text-align:center;">
126
</td>
<td style="text-align:center;">
1322
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
305
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
20
</td>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
22.5
</td>
<td style="text-align:center;">
20-24
</td>
<td style="text-align:center;">
172
</td>
<td style="text-align:center;">
8032
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
306
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
30
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
27.5
</td>
<td style="text-align:center;">
25-29
</td>
<td style="text-align:center;">
195
</td>
<td style="text-align:center;">
18556
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
307
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
30
</td>
<td style="text-align:center;">
35
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
32.5
</td>
<td style="text-align:center;">
30-34
</td>
<td style="text-align:center;">
211
</td>
<td style="text-align:center;">
18907
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
308
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
35
</td>
<td style="text-align:center;">
40
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
37.5
</td>
<td style="text-align:center;">
35-39
</td>
<td style="text-align:center;">
232
</td>
<td style="text-align:center;">
7365
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
309
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
40
</td>
<td style="text-align:center;">
45
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
42.5
</td>
<td style="text-align:center;">
40-44
</td>
<td style="text-align:center;">
249
</td>
<td style="text-align:center;">
1211
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
310
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
45
</td>
<td style="text-align:center;">
50
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
47.5
</td>
<td style="text-align:center;">
45-49
</td>
<td style="text-align:center;">
263
</td>
<td style="text-align:center;">
37
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
398
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
-1.0
</td>
<td style="text-align:center;">
Total
</td>
<td style="text-align:center;">
999
</td>
<td style="text-align:center;">
55434
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2005
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
398
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
-1.0
</td>
<td style="text-align:center;">
Total
</td>
<td style="text-align:center;">
999
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
1.106610e+14
</td>
</tr>
</tbody>
</table>
</div>
<p>The function should ideally be run over each of the specific SexIDs (Males (1), Females (2) and Both sexes (3)), but when it is applied to births data, only “Both sexes” counts are considered. It is also implemented in cases where we have at least one abridged age group.</p>
<p>Before running this function, we need to ensure that all the age labels in the data have an <code>AgeSpan</code> &gt;= 5.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">new_df</span> <span class="op">&lt;-</span> <span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">AgeSpan</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span> <span class="op">|</span> <span class="va">AgeSpan</span> <span class="op">&gt;=</span> <span class="fl">5</span><span class="op">)</span>
<span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">tab_output</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:300px; overflow-x: scroll; width:100%; ">
<table class="table table lightable-paper" style="margin-left: auto; margin-right: auto; font-family: helvetica; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
LocID
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
LocName
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
DataSourceYear
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
DataStatusName
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
SexName
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
SexID
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
TimeLabel
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
TimeMid
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeID
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeUnit
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeStart
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeEnd
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeSpan
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeMid
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeLabel
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeSort
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
DataValue
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
SeriesID
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2005
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
3222
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
7.5
</td>
<td style="text-align:center;">
0-14
</td>
<td style="text-align:center;">
9
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
1.106610e+14
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
304
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
20
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
17.5
</td>
<td style="text-align:center;">
15-19
</td>
<td style="text-align:center;">
126
</td>
<td style="text-align:center;">
1322
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
305
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
20
</td>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
22.5
</td>
<td style="text-align:center;">
20-24
</td>
<td style="text-align:center;">
172
</td>
<td style="text-align:center;">
8032
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
306
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
30
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
27.5
</td>
<td style="text-align:center;">
25-29
</td>
<td style="text-align:center;">
195
</td>
<td style="text-align:center;">
18556
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
307
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
30
</td>
<td style="text-align:center;">
35
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
32.5
</td>
<td style="text-align:center;">
30-34
</td>
<td style="text-align:center;">
211
</td>
<td style="text-align:center;">
18907
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
308
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
35
</td>
<td style="text-align:center;">
40
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
37.5
</td>
<td style="text-align:center;">
35-39
</td>
<td style="text-align:center;">
232
</td>
<td style="text-align:center;">
7365
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
309
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
40
</td>
<td style="text-align:center;">
45
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
42.5
</td>
<td style="text-align:center;">
40-44
</td>
<td style="text-align:center;">
249
</td>
<td style="text-align:center;">
1211
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
310
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
45
</td>
<td style="text-align:center;">
50
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
47.5
</td>
<td style="text-align:center;">
45-49
</td>
<td style="text-align:center;">
263
</td>
<td style="text-align:center;">
37
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
398
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
-1.0
</td>
<td style="text-align:center;">
Total
</td>
<td style="text-align:center;">
999
</td>
<td style="text-align:center;">
55434
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2005
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
398
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
-1.0
</td>
<td style="text-align:center;">
Total
</td>
<td style="text-align:center;">
999
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
1.106610e+14
</td>
</tr>
</tbody>
</table>
</div>
<p>We begin by subsetting the data to ensure that we only have “Both sexes” data and none of the data values are missing.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">new_df</span> <span class="op">&lt;-</span> <span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">SexID</span> <span class="op">==</span> <span class="fl">3</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">DataValue</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">SexID</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">tab_output</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:300px; overflow-x: scroll; width:100%; ">
<table class="table table lightable-paper" style="margin-left: auto; margin-right: auto; font-family: helvetica; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
LocID
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
LocName
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
DataSourceYear
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
DataStatusName
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
SexName
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
TimeLabel
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
TimeMid
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeID
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeUnit
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeStart
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeEnd
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeSpan
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeMid
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeLabel
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeSort
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
DataValue
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
SeriesID
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2005
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
3222
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
7.5
</td>
<td style="text-align:center;">
0-14
</td>
<td style="text-align:center;">
9
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
1.106610e+14
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
304
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
20
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
17.5
</td>
<td style="text-align:center;">
15-19
</td>
<td style="text-align:center;">
126
</td>
<td style="text-align:center;">
1322
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
305
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
20
</td>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
22.5
</td>
<td style="text-align:center;">
20-24
</td>
<td style="text-align:center;">
172
</td>
<td style="text-align:center;">
8032
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
306
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
30
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
27.5
</td>
<td style="text-align:center;">
25-29
</td>
<td style="text-align:center;">
195
</td>
<td style="text-align:center;">
18556
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
307
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
30
</td>
<td style="text-align:center;">
35
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
32.5
</td>
<td style="text-align:center;">
30-34
</td>
<td style="text-align:center;">
211
</td>
<td style="text-align:center;">
18907
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
308
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
35
</td>
<td style="text-align:center;">
40
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
37.5
</td>
<td style="text-align:center;">
35-39
</td>
<td style="text-align:center;">
232
</td>
<td style="text-align:center;">
7365
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
309
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
40
</td>
<td style="text-align:center;">
45
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
42.5
</td>
<td style="text-align:center;">
40-44
</td>
<td style="text-align:center;">
249
</td>
<td style="text-align:center;">
1211
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
310
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
45
</td>
<td style="text-align:center;">
50
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
47.5
</td>
<td style="text-align:center;">
45-49
</td>
<td style="text-align:center;">
263
</td>
<td style="text-align:center;">
37
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
398
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
-1.0
</td>
<td style="text-align:center;">
Total
</td>
<td style="text-align:center;">
999
</td>
<td style="text-align:center;">
55434
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2005
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
398
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
-1.0
</td>
<td style="text-align:center;">
Total
</td>
<td style="text-align:center;">
999
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
1.106610e+14
</td>
</tr>
</tbody>
</table>
</div>
<p>We then check if “Final” data status is available and if so, we prioritize this over the provisional records.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">if</span> <span class="op">(</span><span class="st">"Final"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">new_df</span><span class="op">$</span><span class="va">DataStatusName</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">new_df</span> <span class="op">&lt;-</span> <span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">DataStatusName</span> <span class="op">==</span> <span class="st">"Final"</span><span class="op">)</span>
<span class="op">}</span>

<span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">tab_output</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:300px; overflow-x: scroll; width:100%; ">
<table class="table table lightable-paper" style="margin-left: auto; margin-right: auto; font-family: helvetica; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
LocID
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
LocName
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
DataSourceYear
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
DataStatusName
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
SexName
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
TimeLabel
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
TimeMid
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeID
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeUnit
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeStart
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeEnd
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeSpan
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeMid
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeLabel
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeSort
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
DataValue
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
SeriesID
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2005
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
3222
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
7.5
</td>
<td style="text-align:center;">
0-14
</td>
<td style="text-align:center;">
9
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
1.106610e+14
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
304
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
20
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
17.5
</td>
<td style="text-align:center;">
15-19
</td>
<td style="text-align:center;">
126
</td>
<td style="text-align:center;">
1322
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
305
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
20
</td>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
22.5
</td>
<td style="text-align:center;">
20-24
</td>
<td style="text-align:center;">
172
</td>
<td style="text-align:center;">
8032
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
306
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
30
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
27.5
</td>
<td style="text-align:center;">
25-29
</td>
<td style="text-align:center;">
195
</td>
<td style="text-align:center;">
18556
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
307
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
30
</td>
<td style="text-align:center;">
35
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
32.5
</td>
<td style="text-align:center;">
30-34
</td>
<td style="text-align:center;">
211
</td>
<td style="text-align:center;">
18907
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
308
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
35
</td>
<td style="text-align:center;">
40
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
37.5
</td>
<td style="text-align:center;">
35-39
</td>
<td style="text-align:center;">
232
</td>
<td style="text-align:center;">
7365
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
309
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
40
</td>
<td style="text-align:center;">
45
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
42.5
</td>
<td style="text-align:center;">
40-44
</td>
<td style="text-align:center;">
249
</td>
<td style="text-align:center;">
1211
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
310
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
45
</td>
<td style="text-align:center;">
50
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
47.5
</td>
<td style="text-align:center;">
45-49
</td>
<td style="text-align:center;">
263
</td>
<td style="text-align:center;">
37
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
398
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
-1.0
</td>
<td style="text-align:center;">
Total
</td>
<td style="text-align:center;">
999
</td>
<td style="text-align:center;">
55434
</td>
<td style="text-align:center;">
7.878205e+12
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2005
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
398
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
-1.0
</td>
<td style="text-align:center;">
Total
</td>
<td style="text-align:center;">
999
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
1.106610e+14
</td>
</tr>
</tbody>
</table>
</div>
<p>We proceed to check for multiple series ids and for each unique series id, we check whether it is a full series <a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> with all age groups represented and an open age greater than 60.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ids_series</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">new_df</span><span class="op">$</span><span class="va">SeriesID</span><span class="op">)</span>
<span class="va">n_series</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">ids_series</span><span class="op">)</span>

<span class="co"># for each unique series,</span>
<span class="va">df_out</span> <span class="op">&lt;-</span> <span class="cn">NULL</span>

<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="va">n_series</span><span class="op">)</span> <span class="op">{</span>

  <span class="co">## Filter the data for a specific SeriesID</span>
  <span class="va">df</span> <span class="op">&lt;-</span> <span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">SeriesID</span> <span class="op">==</span> <span class="va">ids_series</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span>

  <span class="co">## Check whether it is a full series with all age groups represented and an open age greater than 60</span>
  <span class="co">## AgeSpan == -1 (Total), AgeSpan == -2 (Unknown), AgeSpan == 5(five-year)</span>

  <span class="va">df_abr_std</span> <span class="op">&lt;-</span> <span class="va">df</span><span class="op">[</span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">AgeStart</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">df</span><span class="op">$</span><span class="va">AgeSpan</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">|</span>
    <span class="va">df</span><span class="op">$</span><span class="va">AgeSpan</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">2</span>, <span class="fl">5</span><span class="op">)</span>, <span class="op">]</span>

  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">df_abr_std</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">13</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">df</span><span class="op">$</span><span class="va">check_full</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dd_series_isfull.html">dd_series_isfull</a></span><span class="op">(</span><span class="va">df_abr_std</span>, abridged <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
    <span class="va">df</span><span class="op">$</span><span class="va">check_full</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span>
  <span class="op">}</span>
  <span class="va">df_out</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">df_out</span>, <span class="va">df</span><span class="op">)</span>
<span class="op">}</span>
<span class="va">new_df</span> <span class="op">&lt;-</span> <span class="va">df_out</span>
<span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">df_out</span><span class="op">)</span>

<span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">tab_output</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:300px; overflow-x: scroll; width:100%; ">
<table class="table table lightable-paper" style="margin-left: auto; margin-right: auto; font-family: helvetica; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
LocID
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
LocName
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
DataSourceYear
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
DataStatusName
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
SexName
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
TimeLabel
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
TimeMid
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeID
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeUnit
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeStart
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeEnd
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeSpan
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeMid
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeLabel
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeSort
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
DataValue
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
SeriesID
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
check_full
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2005
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
3222
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
7.5
</td>
<td style="text-align:center;">
0-14
</td>
<td style="text-align:center;">
9
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
1.106610e+14
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2005
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
398
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
-1.0
</td>
<td style="text-align:center;">
Total
</td>
<td style="text-align:center;">
999
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
1.106610e+14
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
304
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
20
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
17.5
</td>
<td style="text-align:center;">
15-19
</td>
<td style="text-align:center;">
126
</td>
<td style="text-align:center;">
1322
</td>
<td style="text-align:center;">
7.878205e+12
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
305
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
20
</td>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
22.5
</td>
<td style="text-align:center;">
20-24
</td>
<td style="text-align:center;">
172
</td>
<td style="text-align:center;">
8032
</td>
<td style="text-align:center;">
7.878205e+12
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
306
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
30
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
27.5
</td>
<td style="text-align:center;">
25-29
</td>
<td style="text-align:center;">
195
</td>
<td style="text-align:center;">
18556
</td>
<td style="text-align:center;">
7.878205e+12
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
307
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
30
</td>
<td style="text-align:center;">
35
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
32.5
</td>
<td style="text-align:center;">
30-34
</td>
<td style="text-align:center;">
211
</td>
<td style="text-align:center;">
18907
</td>
<td style="text-align:center;">
7.878205e+12
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
308
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
35
</td>
<td style="text-align:center;">
40
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
37.5
</td>
<td style="text-align:center;">
35-39
</td>
<td style="text-align:center;">
232
</td>
<td style="text-align:center;">
7365
</td>
<td style="text-align:center;">
7.878205e+12
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
309
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
40
</td>
<td style="text-align:center;">
45
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
42.5
</td>
<td style="text-align:center;">
40-44
</td>
<td style="text-align:center;">
249
</td>
<td style="text-align:center;">
1211
</td>
<td style="text-align:center;">
7.878205e+12
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
310
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
45
</td>
<td style="text-align:center;">
50
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
47.5
</td>
<td style="text-align:center;">
45-49
</td>
<td style="text-align:center;">
263
</td>
<td style="text-align:center;">
37
</td>
<td style="text-align:center;">
7.878205e+12
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
398
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
-1.0
</td>
<td style="text-align:center;">
Total
</td>
<td style="text-align:center;">
999
</td>
<td style="text-align:center;">
55434
</td>
<td style="text-align:center;">
7.878205e+12
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
</tbody>
</table>
</div>
<p>As can be seen in this data, we have situations were we have multiple total labels for the same series. This may have occurred when a country updates an age label and reports the total for that update. If there exists more than one total reported and there is a one that is equal to the computed total (summation over the age labels), drop the others to be left with this one <a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">new_df</span> <span class="op">&lt;-</span> <span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/dd_multiple_totals.html">dd_multiple_totals</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">tab_output</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:300px; overflow-x: scroll; width:100%; ">
<table class="table table lightable-paper" style="margin-left: auto; margin-right: auto; font-family: helvetica; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
LocID
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
LocName
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
DataSourceYear
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
DataStatusName
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
SexName
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
TimeLabel
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
TimeMid
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeID
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeUnit
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeStart
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeEnd
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeSpan
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeMid
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeLabel
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeSort
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
DataValue
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
SeriesID
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
check_full
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
counter
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
misplaced_oag
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2005
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
3222
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
7.5
</td>
<td style="text-align:center;">
0-14
</td>
<td style="text-align:center;">
9
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
1.106610e+14
</td>
<td style="text-align:center;">
FALSE
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
304
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
20
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
17.5
</td>
<td style="text-align:center;">
15-19
</td>
<td style="text-align:center;">
126
</td>
<td style="text-align:center;">
1322
</td>
<td style="text-align:center;">
7.878205e+12
</td>
<td style="text-align:center;">
FALSE
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
305
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
20
</td>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
22.5
</td>
<td style="text-align:center;">
20-24
</td>
<td style="text-align:center;">
172
</td>
<td style="text-align:center;">
8032
</td>
<td style="text-align:center;">
7.878205e+12
</td>
<td style="text-align:center;">
FALSE
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
306
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
30
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
27.5
</td>
<td style="text-align:center;">
25-29
</td>
<td style="text-align:center;">
195
</td>
<td style="text-align:center;">
18556
</td>
<td style="text-align:center;">
7.878205e+12
</td>
<td style="text-align:center;">
FALSE
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
307
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
30
</td>
<td style="text-align:center;">
35
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
32.5
</td>
<td style="text-align:center;">
30-34
</td>
<td style="text-align:center;">
211
</td>
<td style="text-align:center;">
18907
</td>
<td style="text-align:center;">
7.878205e+12
</td>
<td style="text-align:center;">
FALSE
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
308
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
35
</td>
<td style="text-align:center;">
40
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
37.5
</td>
<td style="text-align:center;">
35-39
</td>
<td style="text-align:center;">
232
</td>
<td style="text-align:center;">
7365
</td>
<td style="text-align:center;">
7.878205e+12
</td>
<td style="text-align:center;">
FALSE
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
309
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
40
</td>
<td style="text-align:center;">
45
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
42.5
</td>
<td style="text-align:center;">
40-44
</td>
<td style="text-align:center;">
249
</td>
<td style="text-align:center;">
1211
</td>
<td style="text-align:center;">
7.878205e+12
</td>
<td style="text-align:center;">
FALSE
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
310
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
45
</td>
<td style="text-align:center;">
50
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
47.5
</td>
<td style="text-align:center;">
45-49
</td>
<td style="text-align:center;">
263
</td>
<td style="text-align:center;">
37
</td>
<td style="text-align:center;">
7.878205e+12
</td>
<td style="text-align:center;">
FALSE
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
578
</td>
<td style="text-align:center;">
Norway
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
Final
</td>
<td style="text-align:center;">
Both sexes
</td>
<td style="text-align:center;">
2002
</td>
<td style="text-align:center;">
2002.5
</td>
<td style="text-align:center;">
398
</td>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
-1.0
</td>
<td style="text-align:center;">
Total
</td>
<td style="text-align:center;">
999
</td>
<td style="text-align:center;">
55434
</td>
<td style="text-align:center;">
7.878205e+12
</td>
<td style="text-align:center;">
FALSE
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
</tbody>
</table>
</div>
<p>We then check the data to ensure that we have the latest data source year for each of the age labels <a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># if there is more than one series ...</span>
<span class="kw">if</span> <span class="op">(</span><span class="va">n_series</span> <span class="op">&gt;</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">latest_source_year</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">new_df</span><span class="op">$</span><span class="va">DataSourceYear</span><span class="op">)</span>
  <span class="va">check_latest_full</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">new_df</span><span class="op">$</span><span class="va">check_full</span><span class="op">[</span><span class="va">new_df</span><span class="op">$</span><span class="va">DataSourceYear</span> <span class="op">==</span> <span class="va">latest_source_year</span><span class="op">]</span><span class="op">)</span>
  <span class="co"># ... and latest series is full then keep only that one</span>
  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/any.html" class="external-link">any</a></span><span class="op">(</span><span class="va">check_latest_full</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">new_df</span> <span class="op">&lt;-</span> <span class="va">new_df</span><span class="op">[</span><span class="va">new_df</span><span class="op">$</span><span class="va">DataSourceYear</span> <span class="op">==</span> <span class="va">latest_source_year</span>, <span class="op">]</span>
  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
    <span class="co"># ... and latest series is not full, then keep the latest data source record for each age</span>
    <span class="va">new_df</span> <span class="op">&lt;-</span> <span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/dd_latest_source_year.html">dd_latest_source_year</a></span><span class="op">(</span><span class="op">)</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
<p>We proceed to tidy up the data frame and in cases where we do not have an “Unknown” age label present, we generate one and set the data value to 0.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">new_df</span> <span class="op">&lt;-</span> <span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">DataSourceYear</span>, <span class="va">AgeStart</span>, <span class="va">AgeEnd</span>, <span class="va">AgeLabel</span>, <span class="va">AgeSpan</span>, <span class="va">DataValue</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="op">)</span>

<span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="op">(</span><span class="st">"Unknown"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">new_df</span><span class="op">$</span><span class="va">AgeLabel</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">new_df</span> <span class="op">&lt;-</span> <span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>
      AgeStart <span class="op">=</span> <span class="op">-</span><span class="fl">2</span>,
      AgeEnd <span class="op">=</span> <span class="op">-</span><span class="fl">2</span>,
      AgeSpan <span class="op">=</span> <span class="op">-</span><span class="fl">2</span>,
      AgeLabel <span class="op">=</span> <span class="st">"Unknown"</span>,
      DataSourceYear <span class="op">=</span> <span class="cn">NA</span>,
      DataValue <span class="op">=</span> <span class="fl">0</span>
    <span class="op">)</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>We have situations where the “Unknown” value represents the difference between the reported total and the summation of the data values (computed totals) and in such cases, we also set the “Unknown” data value to 0 <a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">new_df</span> <span class="op">&lt;-</span> <span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/dd_drop_unknowns.html">dd_drop_unknowns</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>We also reconcile early age groups for births, for example in this case, we have 0-14 and since the minimum age should be 10, we set this to 10-14 <a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a>. We also reconcile ages 0-1, 1-4 and 0-4 such that if 0-4 is missing and 0-1 and 1-4 are present, we sum both to get 0-4 <a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">new_df</span> <span class="op">&lt;-</span> <span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="../reference/dd_firstages_compute_births.html">dd_firstages_compute_births</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">AgeSort</span><span class="op">)</span>

<span class="va">new_df</span> <span class="op">&lt;-</span> <span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/dd_firstages_compute.html">dd_firstages_compute</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">tab_output</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:300px; overflow-x: scroll; width:100%; ">
<table class="table table lightable-paper" style="margin-left: auto; margin-right: auto; font-family: helvetica; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeStart
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeEnd
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeLabel
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeSpan
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeSort
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
DataSourceYear
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
DataValue
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:center;">
10
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
10-14
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
4
</td>
</tr>
<tr>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
20
</td>
<td style="text-align:center;">
15-19
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
6
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
1322
</td>
</tr>
<tr>
<td style="text-align:center;">
20
</td>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
20-24
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
7
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
8032
</td>
</tr>
<tr>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
30
</td>
<td style="text-align:center;">
25-29
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
8
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
18556
</td>
</tr>
<tr>
<td style="text-align:center;">
30
</td>
<td style="text-align:center;">
35
</td>
<td style="text-align:center;">
30-34
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
9
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
18907
</td>
</tr>
<tr>
<td style="text-align:center;">
35
</td>
<td style="text-align:center;">
40
</td>
<td style="text-align:center;">
35-39
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
10
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
7365
</td>
</tr>
<tr>
<td style="text-align:center;">
40
</td>
<td style="text-align:center;">
45
</td>
<td style="text-align:center;">
40-44
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
11
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
1211
</td>
</tr>
<tr>
<td style="text-align:center;">
45
</td>
<td style="text-align:center;">
50
</td>
<td style="text-align:center;">
45-49
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
12
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
37
</td>
</tr>
<tr>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
Total
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
184
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
55434
</td>
</tr>
<tr>
<td style="text-align:center;">
-2
</td>
<td style="text-align:center;">
-2
</td>
<td style="text-align:center;">
Unknown
</td>
<td style="text-align:center;">
-2
</td>
<td style="text-align:center;">
185
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
0
</td>
</tr>
</tbody>
</table>
</div>
<p>We proceed to check whether there are multiple open age groups (TRUE/FALSE), and if so, compute closed age groups from multiple open age groups and add to the data if missing <a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">oag_multi</span> <span class="op">&lt;-</span> <span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/dd_oag_multiple.html">dd_oag_multiple</a></span><span class="op">(</span><span class="op">)</span>

<span class="kw">if</span> <span class="op">(</span><span class="va">oag_multi</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">add</span> <span class="op">&lt;-</span> <span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="../reference/dd_oag2closed.html">dd_oag2closed</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="op">(</span><span class="va">AgeLabel</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">new_df</span><span class="op">$</span><span class="va">AgeLabel</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">new_df</span><span class="op">$</span><span class="va">DataValue</span><span class="op">)</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>

  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">add</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">new_df</span> <span class="op">&lt;-</span> <span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">add</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">AgeStart</span><span class="op">)</span>
  <span class="op">}</span>
<span class="op">}</span>

<span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">tab_output</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:300px; overflow-x: scroll; width:100%; ">
<table class="table table lightable-paper" style="margin-left: auto; margin-right: auto; font-family: helvetica; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeStart
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeEnd
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeLabel
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeSpan
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeSort
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
DataSourceYear
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
DataValue
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:center;">
10
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
10-14
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
4
</td>
</tr>
<tr>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
20
</td>
<td style="text-align:center;">
15-19
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
6
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
1322
</td>
</tr>
<tr>
<td style="text-align:center;">
20
</td>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
20-24
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
7
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
8032
</td>
</tr>
<tr>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
30
</td>
<td style="text-align:center;">
25-29
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
8
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
18556
</td>
</tr>
<tr>
<td style="text-align:center;">
30
</td>
<td style="text-align:center;">
35
</td>
<td style="text-align:center;">
30-34
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
9
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
18907
</td>
</tr>
<tr>
<td style="text-align:center;">
35
</td>
<td style="text-align:center;">
40
</td>
<td style="text-align:center;">
35-39
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
10
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
7365
</td>
</tr>
<tr>
<td style="text-align:center;">
40
</td>
<td style="text-align:center;">
45
</td>
<td style="text-align:center;">
40-44
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
11
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
1211
</td>
</tr>
<tr>
<td style="text-align:center;">
45
</td>
<td style="text-align:center;">
50
</td>
<td style="text-align:center;">
45-49
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
12
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
37
</td>
</tr>
<tr>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
Total
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
184
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
55434
</td>
</tr>
<tr>
<td style="text-align:center;">
-2
</td>
<td style="text-align:center;">
-2
</td>
<td style="text-align:center;">
Unknown
</td>
<td style="text-align:center;">
-2
</td>
<td style="text-align:center;">
185
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
0
</td>
</tr>
</tbody>
</table>
</div>
<p>We then identify the start age of the open age group needed to close the series <a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a>, flag whether this open age group exists in the series and drop records for open age groups that do not close the series.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">oag_start</span> <span class="op">&lt;-</span> <span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/dd_oag_agestart.html">dd_oag_agestart</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">oag_check</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">oag_start</span>, <span class="st">"+"</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">new_df</span><span class="op">$</span><span class="va">AgeLabel</span>

<span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rlang.r-lib.org/reference/is_empty.html" class="external-link">is_empty</a></span><span class="op">(</span><span class="va">oag_start</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">new_df</span> <span class="op">&lt;-</span> <span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="op">(</span><span class="va">AgeStart</span> <span class="op">&gt;</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">AgeSpan</span> <span class="op">==</span> <span class="op">-</span><span class="fl">1</span> <span class="op">&amp;</span> <span class="va">AgeStart</span> <span class="op">!=</span> <span class="va">oag_start</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span>

<span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">tab_output</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:300px; overflow-x: scroll; width:100%; ">
<table class="table table lightable-paper" style="margin-left: auto; margin-right: auto; font-family: helvetica; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeStart
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeEnd
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeLabel
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeSpan
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeSort
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
DataSourceYear
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
DataValue
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:center;">
10
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
10-14
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
4
</td>
</tr>
<tr>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
20
</td>
<td style="text-align:center;">
15-19
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
6
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
1322
</td>
</tr>
<tr>
<td style="text-align:center;">
20
</td>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
20-24
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
7
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
8032
</td>
</tr>
<tr>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
30
</td>
<td style="text-align:center;">
25-29
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
8
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
18556
</td>
</tr>
<tr>
<td style="text-align:center;">
30
</td>
<td style="text-align:center;">
35
</td>
<td style="text-align:center;">
30-34
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
9
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
18907
</td>
</tr>
<tr>
<td style="text-align:center;">
35
</td>
<td style="text-align:center;">
40
</td>
<td style="text-align:center;">
35-39
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
10
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
7365
</td>
</tr>
<tr>
<td style="text-align:center;">
40
</td>
<td style="text-align:center;">
45
</td>
<td style="text-align:center;">
40-44
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
11
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
1211
</td>
</tr>
<tr>
<td style="text-align:center;">
45
</td>
<td style="text-align:center;">
50
</td>
<td style="text-align:center;">
45-49
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
12
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
37
</td>
</tr>
<tr>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
Total
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
184
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
55434
</td>
</tr>
<tr>
<td style="text-align:center;">
-2
</td>
<td style="text-align:center;">
-2
</td>
<td style="text-align:center;">
Unknown
</td>
<td style="text-align:center;">
-2
</td>
<td style="text-align:center;">
185
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
0
</td>
</tr>
</tbody>
</table>
</div>
<p>We also check that there are no missing age groups on the abridged series and if so, we compute all possible open age groups <a href="#fn10" class="footnote-ref" id="fnref10"><sup>10</sup></a> given available input and append the open age group that completes the abridged series. We also check again to see whether any open age group exists.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## Check that there are no missing age groups on the abridged series</span>
<span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">new_df</span><span class="op">[</span><span class="va">new_df</span><span class="op">$</span><span class="va">AgeStart</span> <span class="op">&gt;=</span> <span class="fl">5</span>, <span class="op">]</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">check_abr</span> <span class="op">&lt;-</span> <span class="fu">DemoTools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DemoTools/man/is_abridged.html" class="external-link">is_abridged</a></span><span class="op">(</span><span class="va">new_df</span><span class="op">$</span><span class="va">AgeStart</span><span class="op">[</span><span class="va">new_df</span><span class="op">$</span><span class="va">AgeStart</span> <span class="op">&gt;=</span> <span class="fl">5</span><span class="op">]</span><span class="op">)</span>
<span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
  <span class="va">check_abr</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span>
<span class="op">}</span>

<span class="kw">if</span> <span class="op">(</span><span class="va">check_abr</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">{</span>

  <span class="co">## Compute all possible open age groups given available input</span>
  <span class="va">abr_oag</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dd_oag_compute.html">dd_oag_compute</a></span><span class="op">(</span><span class="va">new_df</span>, age_span <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>

  <span class="co">## Append the oag that completes the abridged series</span>
  <span class="va">new_df</span> <span class="op">&lt;-</span> <span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">abr_oag</span><span class="op">[</span><span class="op">!</span><span class="op">(</span><span class="va">abr_oag</span><span class="op">$</span><span class="va">AgeLabel</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">new_df</span><span class="op">$</span><span class="va">AgeLabel</span><span class="op">)</span> <span class="op">&amp;</span>
      <span class="va">abr_oag</span><span class="op">$</span><span class="va">AgeStart</span> <span class="op">==</span> <span class="va">oag_start</span>, <span class="op">]</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">AgeSort</span><span class="op">)</span>
<span class="op">}</span>


<span class="co">## Check again whether any open age group exists</span>
<span class="va">oag_check</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">oag_start</span>, <span class="st">"+"</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">new_df</span><span class="op">$</span><span class="va">AgeLabel</span>
<span class="va">oag_check</span>
<span class="co">#&gt; [1] TRUE</span>

<span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">tab_output</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:300px; overflow-x: scroll; width:100%; ">
<table class="table table lightable-paper" style="margin-left: auto; margin-right: auto; font-family: helvetica; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeStart
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeEnd
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeLabel
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeSpan
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeSort
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
DataSourceYear
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
DataValue
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:center;">
10
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
10-14
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
4
</td>
</tr>
<tr>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
20
</td>
<td style="text-align:center;">
15-19
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
6
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
1322
</td>
</tr>
<tr>
<td style="text-align:center;">
20
</td>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
20-24
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
7
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
8032
</td>
</tr>
<tr>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
30
</td>
<td style="text-align:center;">
25-29
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
8
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
18556
</td>
</tr>
<tr>
<td style="text-align:center;">
30
</td>
<td style="text-align:center;">
35
</td>
<td style="text-align:center;">
30-34
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
9
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
18907
</td>
</tr>
<tr>
<td style="text-align:center;">
35
</td>
<td style="text-align:center;">
40
</td>
<td style="text-align:center;">
35-39
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
10
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
7365
</td>
</tr>
<tr>
<td style="text-align:center;">
40
</td>
<td style="text-align:center;">
45
</td>
<td style="text-align:center;">
40-44
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
11
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
1211
</td>
</tr>
<tr>
<td style="text-align:center;">
45
</td>
<td style="text-align:center;">
50
</td>
<td style="text-align:center;">
45-49
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
12
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
37
</td>
</tr>
<tr>
<td style="text-align:center;">
50
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
50+
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
167
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
0
</td>
</tr>
<tr>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
Total
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
184
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
55434
</td>
</tr>
<tr>
<td style="text-align:center;">
-2
</td>
<td style="text-align:center;">
-2
</td>
<td style="text-align:center;">
Unknown
</td>
<td style="text-align:center;">
-2
</td>
<td style="text-align:center;">
185
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
0
</td>
</tr>
</tbody>
</table>
</div>
<p>If “Total” is missing and the series is otherwise complete, we compute it .</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="op">(</span><span class="st">"Total"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">new_df</span><span class="op">$</span><span class="va">AgeLabel</span><span class="op">)</span> <span class="op">&amp;</span> <span class="st">"0-4"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">new_df</span><span class="op">$</span><span class="va">AgeLabel</span> <span class="op">&amp;</span> <span class="va">oag_check</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">new_df</span> <span class="op">&lt;-</span> <span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>
      AgeStart <span class="op">=</span> <span class="fl">0</span>,
      AgeEnd <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>,
      AgeLabel <span class="op">=</span> <span class="st">"Total"</span>,
      AgeSpan <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>,
      AgeSort <span class="op">=</span> <span class="fl">184</span>,
      DataSourceYear <span class="op">=</span> <span class="cn">NA</span>,
      DataValue <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">new_df</span><span class="op">$</span><span class="va">DataValue</span><span class="op">[</span><span class="va">new_df</span><span class="op">$</span><span class="va">AgeSpan</span> <span class="op">==</span> <span class="fl">5</span><span class="op">]</span><span class="op">)</span> <span class="op">+</span>
        <span class="va">new_df</span><span class="op">$</span><span class="va">DataValue</span><span class="op">[</span><span class="va">new_df</span><span class="op">$</span><span class="va">AgeSpan</span> <span class="op">==</span> <span class="op">-</span><span class="fl">1</span> <span class="op">&amp;</span> <span class="va">new_df</span><span class="op">$</span><span class="va">AgeStart</span> <span class="op">==</span> <span class="va">oag_start</span><span class="op">]</span> <span class="op">+</span>
        <span class="va">new_df</span><span class="op">$</span><span class="va">DataValue</span><span class="op">[</span><span class="va">new_df</span><span class="op">$</span><span class="va">AgeLabel</span> <span class="op">==</span> <span class="st">"Unknown"</span><span class="op">]</span>
    <span class="op">)</span><span class="op">)</span>
<span class="op">}</span>

<span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">tab_output</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:300px; overflow-x: scroll; width:100%; ">
<table class="table table lightable-paper" style="margin-left: auto; margin-right: auto; font-family: helvetica; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeStart
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeEnd
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeLabel
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeSpan
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeSort
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
DataSourceYear
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
DataValue
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:center;">
10
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
10-14
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
4
</td>
</tr>
<tr>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
20
</td>
<td style="text-align:center;">
15-19
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
6
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
1322
</td>
</tr>
<tr>
<td style="text-align:center;">
20
</td>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
20-24
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
7
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
8032
</td>
</tr>
<tr>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
30
</td>
<td style="text-align:center;">
25-29
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
8
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
18556
</td>
</tr>
<tr>
<td style="text-align:center;">
30
</td>
<td style="text-align:center;">
35
</td>
<td style="text-align:center;">
30-34
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
9
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
18907
</td>
</tr>
<tr>
<td style="text-align:center;">
35
</td>
<td style="text-align:center;">
40
</td>
<td style="text-align:center;">
35-39
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
10
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
7365
</td>
</tr>
<tr>
<td style="text-align:center;">
40
</td>
<td style="text-align:center;">
45
</td>
<td style="text-align:center;">
40-44
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
11
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
1211
</td>
</tr>
<tr>
<td style="text-align:center;">
45
</td>
<td style="text-align:center;">
50
</td>
<td style="text-align:center;">
45-49
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
12
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
37
</td>
</tr>
<tr>
<td style="text-align:center;">
50
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
50+
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
167
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
0
</td>
</tr>
<tr>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
Total
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
184
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
55434
</td>
</tr>
<tr>
<td style="text-align:center;">
-2
</td>
<td style="text-align:center;">
-2
</td>
<td style="text-align:center;">
Unknown
</td>
<td style="text-align:center;">
-2
</td>
<td style="text-align:center;">
185
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
0
</td>
</tr>
</tbody>
</table>
</div>
<p>Finally, a note is generated to alert the user about missing data and this process is repeated for all the sex ids (in the case of deaths data).</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">new_df</span><span class="op">$</span><span class="va">note</span> <span class="op">&lt;-</span> <span class="cn">NA</span>
<span class="kw">if</span> <span class="op">(</span><span class="va">check_abr</span> <span class="op">==</span> <span class="cn">FALSE</span> <span class="op">|</span> <span class="va">oag_check</span> <span class="op">==</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">abr</span><span class="op">$</span><span class="va">note</span> <span class="op">&lt;-</span> <span class="st">"The abridged series is missing data for one or more age groups."</span>
<span class="op">}</span>
<span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="op">(</span><span class="st">"0"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">new_df</span><span class="op">$</span><span class="va">AgeLabel</span> <span class="op">&amp;</span> <span class="st">"1-4"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">new_df</span><span class="op">$</span><span class="va">AgeLabel</span> <span class="op">&amp;</span> <span class="st">"0-4"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">new_df</span><span class="op">$</span><span class="va">AgeLabel</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">new_df</span><span class="op">$</span><span class="va">note</span> <span class="op">&lt;-</span> <span class="st">"The abridged series is missing data for one or more age groups."</span>
<span class="op">}</span>

<span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">tab_output</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:300px; overflow-x: scroll; width:100%; ">
<table class="table table lightable-paper" style="margin-left: auto; margin-right: auto; font-family: helvetica; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeStart
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeEnd
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeLabel
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeSpan
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
AgeSort
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
DataSourceYear
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
DataValue
</th>
<th style="text-align:center;font-weight: bold;color: white !important;background-color: #6ebed8 !important;position: sticky; top:0; background-color: #FFFFFF;">
note
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:center;">
10
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
10-14
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
The abridged series is missing data for one or more age groups.
</td>
</tr>
<tr>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
20
</td>
<td style="text-align:center;">
15-19
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
6
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
1322
</td>
<td style="text-align:center;">
The abridged series is missing data for one or more age groups.
</td>
</tr>
<tr>
<td style="text-align:center;">
20
</td>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
20-24
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
7
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
8032
</td>
<td style="text-align:center;">
The abridged series is missing data for one or more age groups.
</td>
</tr>
<tr>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
30
</td>
<td style="text-align:center;">
25-29
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
8
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
18556
</td>
<td style="text-align:center;">
The abridged series is missing data for one or more age groups.
</td>
</tr>
<tr>
<td style="text-align:center;">
30
</td>
<td style="text-align:center;">
35
</td>
<td style="text-align:center;">
30-34
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
9
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
18907
</td>
<td style="text-align:center;">
The abridged series is missing data for one or more age groups.
</td>
</tr>
<tr>
<td style="text-align:center;">
35
</td>
<td style="text-align:center;">
40
</td>
<td style="text-align:center;">
35-39
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
10
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
7365
</td>
<td style="text-align:center;">
The abridged series is missing data for one or more age groups.
</td>
</tr>
<tr>
<td style="text-align:center;">
40
</td>
<td style="text-align:center;">
45
</td>
<td style="text-align:center;">
40-44
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
11
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
1211
</td>
<td style="text-align:center;">
The abridged series is missing data for one or more age groups.
</td>
</tr>
<tr>
<td style="text-align:center;">
45
</td>
<td style="text-align:center;">
50
</td>
<td style="text-align:center;">
45-49
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
12
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
37
</td>
<td style="text-align:center;">
The abridged series is missing data for one or more age groups.
</td>
</tr>
<tr>
<td style="text-align:center;">
50
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
50+
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
167
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
The abridged series is missing data for one or more age groups.
</td>
</tr>
<tr>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
Total
</td>
<td style="text-align:center;">
-1
</td>
<td style="text-align:center;">
184
</td>
<td style="text-align:center;">
2004
</td>
<td style="text-align:center;">
55434
</td>
<td style="text-align:center;">
The abridged series is missing data for one or more age groups.
</td>
</tr>
<tr>
<td style="text-align:center;">
-2
</td>
<td style="text-align:center;">
-2
</td>
<td style="text-align:center;">
Unknown
</td>
<td style="text-align:center;">
-2
</td>
<td style="text-align:center;">
185
</td>
<td style="text-align:center;">
NA
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
The abridged series is missing data for one or more age groups.
</td>
</tr>
</tbody>
</table>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p><a href="https://shelmith-kariuki.github.io/rddharmony/reference/DDharmonize_Vitals5.html" class="external-link">DDharmonize_Vitals5</a><a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p><a href="https://shelmith-kariuki.github.io/rddharmony/reference/dd_series_isfull.html" class="external-link">dd_series_isfull</a><a href="#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p><a href="https://shelmith-kariuki.github.io/rddharmony/reference/dd_multiple_totals.html" class="external-link">dd_multiple_totals</a><a href="#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p><a href="https://shelmith-kariuki.github.io/rddharmony/reference/dd_latest_source_year.html" class="external-link">dd_latest_source_year</a><a href="#fnref4" class="footnote-back">↩︎</a></p></li>
<li id="fn5"><p><a href="https://shelmith-kariuki.github.io/rddharmony/reference/dd_drop_unknowns.html" class="external-link">dd_drop_unknowns</a><a href="#fnref5" class="footnote-back">↩︎</a></p></li>
<li id="fn6"><p><a href="https://shelmith-kariuki.github.io/rddharmony/reference/dd_firstages_compute_births.html" class="external-link">dd_firstages_compute_births</a><a href="#fnref6" class="footnote-back">↩︎</a></p></li>
<li id="fn7"><p><a href="https://shelmith-kariuki.github.io/rddharmony/reference/dd_firstages_compute.html" class="external-link">dd_firstages_compute</a><a href="#fnref7" class="footnote-back">↩︎</a></p></li>
<li id="fn8"><p><a href="https://shelmith-kariuki.github.io/rddharmony/reference/dd_oag_multiple.html" class="external-link">dd_oag_multiple</a><a href="#fnref8" class="footnote-back">↩︎</a></p></li>
<li id="fn9"><p><a href="https://shelmith-kariuki.github.io/rddharmony/reference/dd_oag_agestart.html" class="external-link">dd_oag_agestart</a><a href="#fnref9" class="footnote-back">↩︎</a></p></li>
<li id="fn10"><p><a href="https://shelmith-kariuki.github.io/rddharmony/reference/dd_oag_compute.html" class="external-link">dd_oag_compute</a><a href="#fnref10" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Shelmith Kariuki.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
